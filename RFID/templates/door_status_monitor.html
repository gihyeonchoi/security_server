<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ ìƒíƒœ ëª¨ë‹ˆí„°ë§ - ì¶˜ì²œ í´ë¦¬í…</title>
    <link rel="stylesheet" href="/static/css/door_monitor.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸšª ë¬¸ ìƒíƒœ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h1>
            <div class="status-summary">
                <div class="summary-item">
                    <span class="count">{{ total_rooms }}</span>
                    <span class="label">ì „ì²´ ë°©</span>
                </div>
                <div class="summary-item open">
                    <span class="count">{{ open_rooms }}</span>
                    <span class="label">ì—´ë¦¼</span>
                </div>
                <div class="summary-item closed">
                    <span class="count">{{ closed_rooms }}</span>
                    <span class="label">ë‹«í˜</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="rooms-grid" id="roomsGrid">
                {% for room in rooms %}
                <div class="room-card {{ room.door_status|yesno:'open,closed' }}" 
                     data-room-id="{{ room.id }}" 
                     data-device-id="{{ room.device_id }}">
                    <div class="room-header">
                        <h3 class="room-name">{{ room.name }}</h3>
                        <div class="door-status-icon">
                            {% if room.door_status %}
                                ğŸ”“
                            {% else %}
                                ğŸ”’
                            {% endif %}
                        </div>
                    </div>
                    <div class="room-info">
                        <p class="location">ğŸ“ {{ room.location }}</p>
                        <p class="device-id">ğŸ”§ {{ room.device_id }}</p>
                        <p class="required-level">ğŸ” ë³´ì•ˆë“±ê¸‰: {{ room.required_level }}</p>
                    </div>
                    <div class="room-status">
                        <span class="status-text">
                            {% if room.door_status %}
                                ì—´ë¦¼
                            {% else %}
                                ë‹«í˜
                            {% endif %}
                        </span>
                        <span class="last-change">
                            {% if room.last_door_change %}
                                {{ room.last_door_change|date:"Y-m-d H:i:s" }}
                            {% else %}
                                ë³€ê²½ ì´ë ¥ ì—†ìŒ
                            {% endif %}
                        </span>
                    </div>
                </div>
                {% empty %}
                <div class="no-rooms">
                    <p>ë“±ë¡ëœ ë°©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
                {% endfor %}
            </div>
        </main>

        <div class="controls">
            <button id="refreshBtn" class="btn btn-primary">ìƒˆë¡œê³ ì¹¨</button>
            <button id="autoRefreshBtn" class="btn btn-secondary">ìë™ ìƒˆë¡œê³ ì¹¨: OFF</button>
            <span class="last-update">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="lastUpdate">-</span></span>
        </div>
    </div>

    <script src="/static/js/door_monitor.js"></script>
</body>
</html>